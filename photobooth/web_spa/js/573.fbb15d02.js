"use strict";(globalThis["webpackChunkphotobooth_app_frontend"]=globalThis["webpackChunkphotobooth_app_frontend"]||[]).push([[573],{91573:(t,e,i)=>{i.r(e),i.d(e,{default:()=>$});var n=i(59835),o=i(86970);const s={key:1,class:"full-height full-width column justify-center content-center",style:{position:"absolute"}},r={key:2,class:"full-height full-width column justify-center content-center",style:{position:"absolute"}},a=["innerHTML"],l={key:0},u={class:"row q-gutter-sm"},c=["innerHTML"],g=["innerHTML"],m=["innerHTML"],d=["innerHTML"],_={key:0},h={class:"q-gutter-sm"},S=["innerHTML"],p=["innerHTML"],w=(0,n._)("br",null,null,-1);function y(t,e,i,y,T,f){const k=(0,n.up)("q-spinner-grid"),v=(0,n.up)("countdown-timer"),b=(0,n.up)("q-icon"),L=(0,n.up)("q-btn"),A=(0,n.up)("q-page-sticky"),I=(0,n.up)("q-spinner-puff"),M=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(M,{class:"q-pa-none column full-height"},{default:(0,n.w5)((()=>[t.showPreview?((0,n.wg)(),(0,n.iD)("div",{key:0,id:"preview-stream",style:{"background-image":'url("/aquisition/stream.mjpg")'},class:(0,o.C_)(["full-width column justify-center content-center",{mirroreffect:t.livestreamMirror}])},null,2)):(0,n.kq)("",!0),t.showProcessing?((0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(k,{size:"20em"})])):(0,n.kq)("",!0),t.showCountdownCounting?((0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(v,{ref:"countdowntimer",duration:this.stateStore.duration,messageDuration:t.uiSettingsStore.uiSettings.TAKEPIC_MSG_TIME,messageText:t.uiSettingsStore.uiSettings.TAKEPIC_MSG_TEXT},null,8,["duration","messageDuration","messageText"])])):(0,n.kq)("",!0),t.showFrontpage?((0,n.wg)(),(0,n.iD)("div",{key:3,id:"frontpage_text",innerHTML:t.uiSettingsStore.uiSettings["FRONTPAGE_TEXT"]},null,8,a)):(0,n.kq)("",!0),(0,n.Wm)(A,{position:"bottom",offset:[0,25]},{default:(0,n.w5)((()=>[t.showFrontpage?((0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("div",u,[t.uiSettingsStore.uiSettings.show_takepic_on_frontpage?((0,n.wg)(),(0,n.j4)(L,{key:0,stack:"",color:"primary","no-caps":"",onClick:e[0]||(e[0]=e=>t.takePicture()),class:"action-button col-auto",style:(0,o.j5)(t.uiSettingsStore.uiSettings.action_button_style)},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{name:"o_photo_camera",style:(0,o.j5)(t.uiSettingsStore.uiSettings.action_button_icon_style)},null,8,["style"]),(0,n._)("div",{style:{"white-space":"nowrap"},class:"gt-sm",innerHTML:t.$t("BTN_LABEL_MAINPAGE_TAKE_PHOTO")},null,8,c)])),_:1},8,["style"])):(0,n.kq)("",!0),t.uiSettingsStore.uiSettings.show_takecollage_on_frontpage?((0,n.wg)(),(0,n.j4)(L,{key:1,stack:"",color:"primary","no-caps":"",onClick:e[1]||(e[1]=e=>t.takeCollage()),class:"action-button col-auto",style:(0,o.j5)(t.uiSettingsStore.uiSettings.action_button_style)},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{name:"o_auto_awesome_mosaic",style:(0,o.j5)(t.uiSettingsStore.uiSettings.action_button_icon_style)},null,8,["style"]),(0,n._)("div",{style:{"white-space":"nowrap"},class:"gt-sm",innerHTML:t.$t("BTN_LABEL_MAINPAGE_TAKE_COLLAGE")},null,8,g)])),_:1},8,["style"])):(0,n.kq)("",!0),t.uiSettingsStore.uiSettings.show_takeanimation_on_frontpage?((0,n.wg)(),(0,n.j4)(L,{key:2,stack:"",color:"primary","no-caps":"",onClick:e[2]||(e[2]=e=>t.takeAnimation()),class:"action-button col-auto",style:(0,o.j5)(t.uiSettingsStore.uiSettings.action_button_style)},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{name:"o_gif_box",style:(0,o.j5)(t.uiSettingsStore.uiSettings.action_button_icon_style)},null,8,["style"]),(0,n._)("div",{style:{"white-space":"nowrap"},class:"gt-sm",innerHTML:t.$t("BTN_LABEL_MAINPAGE_TAKE_ANIMATION")},null,8,m)])),_:1},8,["style"])):(0,n.kq)("",!0),t.uiSettingsStore.uiSettings.show_takevideo_on_frontpage?((0,n.wg)(),(0,n.j4)(L,{key:3,stack:"",color:"primary","no-caps":"",onClick:e[3]||(e[3]=e=>t.takeVideo()),class:"action-button col-auto",style:(0,o.j5)(t.uiSettingsStore.uiSettings.action_button_style)},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{name:"o_movie",style:(0,o.j5)(t.uiSettingsStore.uiSettings.action_button_icon_style)},null,8,["style"]),(0,n._)("div",{style:{"white-space":"nowrap"},class:"gt-sm",innerHTML:t.$t("BTN_LABEL_MAINPAGE_TAKE_VIDEO")},null,8,d)])),_:1},8,["style"])):(0,n.kq)("",!0)])])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(A,{position:"top-left",offset:[25,25]},{default:(0,n.w5)((()=>[t.showFrontpage?((0,n.wg)(),(0,n.iD)("div",_,[(0,n._)("div",h,[t.uiSettingsStore.uiSettings.show_gallery_on_frontpage?((0,n.wg)(),(0,n.j4)(L,{key:0,color:"primary","no-caps":"",to:"/gallery",onClick:e[4]||(e[4]=e=>t.abortTimer()),class:"action-button",id:"frontage-gallery-button",style:(0,o.j5)(t.uiSettingsStore.uiSettings.gallery_button_style)},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{left:"",name:"photo_library",style:(0,o.j5)(t.uiSettingsStore.uiSettings.gallery_button_icon_style)},null,8,["style"]),(0,n._)("div",{class:"gt-sm",innerHTML:t.$t("BTN_LABEL_MAINPAGE_TO_GALLERY")},null,8,S)])),_:1},8,["style"])):(0,n.kq)("",!0),t.uiSettingsStore.uiSettings.show_admin_on_frontpage?((0,n.wg)(),(0,n.j4)(L,{key:1,color:"secondary","no-caps":"",to:"/admin",class:"action-button"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{left:"",name:"admin_panel_settings"}),(0,n._)("div",{class:"gt-sm",innerHTML:t.$t("BTN_LABEL_MAINPAGE_TO_ADMIN")},null,8,p)])),_:1})):(0,n.kq)("",!0)])])):(0,n.kq)("",!0)])),_:1}),t.showRecording?((0,n.wg)(),(0,n.j4)(A,{key:4,position:"top",offset:[0,25],align:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{color:"red",size:"7em"}),w,(0,n.Wm)(L,{flat:"",color:"red",label:"Stop recording (not yet implemented)"})])),_:1})):(0,n.kq)("",!0)])),_:1})}i(72879);var T=i(91569),f=i(19302),k=i(67575),v=i(15639),b=i(96694),L=i(61957);const A={style:{width:"70vw",height:"70vh"}},I=["innerHTML"];function M(t,e,i,s,r,a){const l=(0,n.up)("q-circular-progress");return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",A,[(0,n.wy)((0,n.Wm)(l,{"show-value":"",style:{width:"100%",height:"100%"},value:t.remainingSeconds,min:0,max:this.duration,reverse:"",size:"70vh",color:"primary",class:"text-secondary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(parseFloat(t.remainingSeconds.toFixed(0))),1)])),_:1},8,["value","max"]),[[L.F8,t.showCountdown]]),(0,n.wy)((0,n._)("div",{innerHTML:t.messageText},null,8,I),[[L.F8,t.showMessage]])],512)),[[L.F8,t.showBox]])}const C=(0,n.aZ)({name:"CountdownTimer",data(){return{intervalTimerId:null,remainingSeconds:0}},mounted(){this.startTimer()},beforeUnmount(){clearInterval(this.intervalTimerId)},computed:{showBox(){return this.remainingSeconds>0},showCountdown(){return+this.remainingSeconds>=this.messageDuration},showMessage(){return!this.showCountdown}},methods:{abortTimer(){clearInterval(this.intervalTimerId),this.remainingSeconds=0},startTimer(){console.log(`starting timer, duration=${this.duration}`),this.remainingSeconds=this.duration,this.intervalTimerId=setInterval((()=>{this.remainingSeconds-=.05,this.remainingSeconds<=0&&clearInterval(this.intervalTimerId)}),50)}},props:{duration:{type:Number,required:!0},messageDuration:{type:Number,default:.5},messageText:{type:String,default:"ðŸ˜ƒ"}}});var E=i(11639),P=i(83302),q=i(69984),j=i.n(q);const N=(0,E.Z)(C,[["render",M]]),H=N;j()(C,"components",{QCircularProgress:P.Z});const B=(0,n.aZ)({components:{CountdownTimer:H},setup(){(0,f.Z)();const t=(0,k.h)(),e=(0,v.B)(),i=(0,b.R)();return{store:t,stateStore:e,uiSettingsStore:i,remoteProcedureCall:T.remoteProcedureCall,intervalTimerId:null,remainingSeconds:0,remainingSecondsNormalized:0}},mounted(){this.startTimer()},beforeUnmount(){this.abortTimer()},methods:{takePicture(){this.abortTimer(),(0,T.remoteProcedureCall)("/processing/chose/1pic")},takeCollage(){this.abortTimer(),(0,T.remoteProcedureCall)("/processing/chose/collage")},takeAnimation(){this.abortTimer(),(0,T.remoteProcedureCall)("/processing/chose/animation")},takeVideo(){this.abortTimer(),(0,T.remoteProcedureCall)("/processing/chose/video")},abortTimer(){clearInterval(this.intervalTimerId),this.remainingSeconds=0,this.remainingSecondsNormalized=0},startTimer(){var t=this.uiSettingsStore.uiSettings["TIMEOUT_TO_SLIDESHOW"];console.log(`starting newitemarrived timer, duration=${t}`),this.remainingSeconds=t,this.intervalTimerId=setInterval((()=>{this.remainingSecondsNormalized=this.remainingSeconds/t,this.remainingSeconds-=.05,this.remainingSeconds<=0&&(clearInterval(this.intervalTimerId),this.$router.push({path:"/slideshow/gallery"}))}),50)}},watch:{},computed:{showProcessing:{get(){const t="captures_completed"==this.stateStore.state,e="capture"==this.stateStore.state;return t||e}},showRecording:{get(){return"record"==this.stateStore.state}},livestreamMirror:{get(){return this.uiSettingsStore.uiSettings.livestream_mirror_effect}},showCountdownCounting:{get(){const t="counting"==this.stateStore.state;return this.stateStore.duration>0&&t}},showPreview:{get(){const t=!0,e="idle"==this.stateStore.state,i="record"==this.stateStore.state,n="counting"==this.stateStore.state;return t&&(e||n||i)}},showFrontpage:{get(){return"idle"==this.stateStore.state}}}});var D=i(69885),W=i(93040),x=i(30627),G=i(68879),Z=i(22857),O=i(5412);const F=(0,E.Z)(B,[["render",y]]),$=F;j()(B,"components",{QPage:D.Z,QSpinnerGrid:W.Z,QPageSticky:x.Z,QBtn:G.Z,QIcon:Z.Z,QSpinnerPuff:O.Z})}}]);