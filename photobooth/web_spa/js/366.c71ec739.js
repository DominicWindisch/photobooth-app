"use strict";(globalThis["webpackChunkphotobooth_app_frontend"]=globalThis["webpackChunkphotobooth_app_frontend"]||[]).push([[366],{99366:(e,t,o)=>{o.r(t),o.d(t,{default:()=>K});var i=o(59835),n=o(86970);const s={key:1,class:"full-height full-width column justify-center content-center",style:{position:"absolute"}},r={key:2,class:"full-height full-width column justify-center content-center",style:{position:"absolute"},id:"frontpage-countdown"},a=["innerHTML"],u={key:0},l={class:"row q-gutter-md"},c={style:{"white-space":"nowrap"},class:"gt-sm"},g={key:0,style:{"white-space":"nowrap"},class:"gt-sm"},d={key:1,style:{"white-space":"nowrap"},class:"gt-sm"},m={key:0,style:{"white-space":"nowrap"},class:"gt-sm"},p={key:1,style:{"white-space":"nowrap"},class:"gt-sm"},_={style:{"white-space":"nowrap"},class:"gt-sm"},w={key:0},h={class:"q-gutter-md"},S={class:"gt-sm"},f={class:"gt-sm"},k=(0,i._)("br",null,null,-1);function y(e,t,o,y,T,v){const A=(0,i.up)("q-spinner-grid"),b=(0,i.up)("countdown-timer"),C=(0,i.up)("q-icon"),E=(0,i.up)("q-btn"),I=(0,i.up)("q-page-sticky"),P=(0,i.up)("q-spinner-puff"),q=(0,i.up)("RouteAfterTimeout"),D=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(D,{class:"q-pa-none column full-height"},{default:(0,i.w5)((()=>[e.showPreview?((0,i.wg)(),(0,i.iD)("div",{key:0,id:"preview-stream",style:{"background-image":'url("/aquisition/stream.mjpg")'},class:(0,n.C_)(["full-width column justify-center content-center",{mirroreffect:e.livestreamMirror}])},null,2)):(0,i.kq)("",!0),e.showProcessing?((0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(A,{size:"20em"})])):(0,i.kq)("",!0),e.showCountdownCounting?((0,i.wg)(),(0,i.iD)("div",r,[(0,i.Wm)(b,{ref:"countdowntimer",duration:this.stateStore.duration,messageDuration:e.uiSettingsStore.uiSettings.TAKEPIC_MSG_TIME,messageText:e.uiSettingsStore.uiSettings.TAKEPIC_MSG_TEXT},null,8,["duration","messageDuration","messageText"])])):(0,i.kq)("",!0),e.showFrontpage?((0,i.wg)(),(0,i.iD)("div",{key:3,id:"frontpage_text",innerHTML:e.uiSettingsStore.uiSettings["FRONTPAGE_TEXT"]},null,8,a)):(0,i.kq)("",!0),(0,i.Wm)(I,{position:"bottom",offset:[0,25]},{default:(0,i.w5)((()=>[e.showFrontpage?((0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("div",l,[e.uiSettingsStore.uiSettings.show_takepic_on_frontpage?((0,i.wg)(),(0,i.j4)(E,{key:0,stack:"",color:"primary","no-caps":"",rounded:"",onClick:t[0]||(t[0]=t=>e.takePicture()),class:"action-button col-auto",id:"frontpage-button-take-pic"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{name:"o_photo_camera"}),(0,i._)("div",c,(0,n.zw)(e.$t("BTN_LABEL_MAINPAGE_TAKE_PHOTO")),1)])),_:1})):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.uiSettingsStore.uiSettings.number_of_collage_configurations,(t=>((0,i.wg)(),(0,i.iD)(i.HY,{key:t},[e.uiSettingsStore.appconfig.mediaprocessing_pipelines_collage[t-1].display_on_frontpage?((0,i.wg)(),(0,i.j4)(E,{key:0,stack:"",color:"primary","no-caps":"",rounded:"",onClick:o=>e.takeCollage(t),class:"action-button col-auto",id:`frontpage-button-take-collage-${t}`},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{name:"o_auto_awesome_mosaic"}),""==e.uiSettingsStore.appconfig.mediaprocessing_pipelines_collage[t-1].configuration_name?((0,i.wg)(),(0,i.iD)("div",g,(0,n.zw)(e.$t("BTN_LABEL_MAINPAGE_TAKE_COLLAGE"))+"-"+(0,n.zw)(t),1)):((0,i.wg)(),(0,i.iD)("div",d,(0,n.zw)(e.uiSettingsStore.appconfig.mediaprocessing_pipelines_collage[t-1].configuration_name),1))])),_:2},1032,["onClick","id"])):(0,i.kq)("",!0)],64)))),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.uiSettingsStore.uiSettings.number_of_animation_configurations,(t=>((0,i.wg)(),(0,i.iD)(i.HY,{key:t},[e.uiSettingsStore.appconfig.mediaprocessing_pipelines_animation[t-1].display_on_frontpage?((0,i.wg)(),(0,i.j4)(E,{key:0,stack:"",color:"primary","no-caps":"",rounded:"",onClick:o=>e.takeAnimation(t),class:"action-button col-auto",id:"frontpage-button-take-animation"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{name:"o_gif_box"}),""==e.uiSettingsStore.appconfig.mediaprocessing_pipelines_animation[t-1].configuration_name?((0,i.wg)(),(0,i.iD)("div",m,(0,n.zw)(e.$t("BTN_LABEL_MAINPAGE_TAKE_ANIMATION"))+"-"+(0,n.zw)(t),1)):((0,i.wg)(),(0,i.iD)("div",p,(0,n.zw)(e.uiSettingsStore.appconfig.mediaprocessing_pipelines_animation[t-1].configuration_name),1))])),_:2},1032,["onClick"])):(0,i.kq)("",!0)],64)))),128)),e.uiSettingsStore.uiSettings.show_takevideo_on_frontpage?((0,i.wg)(),(0,i.j4)(E,{key:1,stack:"",color:"primary","no-caps":"",rounded:"",onClick:t[1]||(t[1]=t=>e.takeVideo()),class:"action-button col-auto",id:"frontpage-button-take-video"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{name:"o_movie"}),(0,i._)("div",_,(0,n.zw)(e.$t("BTN_LABEL_MAINPAGE_TAKE_VIDEO")),1)])),_:1})):(0,i.kq)("",!0)])])):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(I,{position:"top-left",offset:[25,25]},{default:(0,i.w5)((()=>[e.showFrontpage?((0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("div",h,[e.uiSettingsStore.uiSettings.show_gallery_on_frontpage?((0,i.wg)(),(0,i.j4)(E,{key:0,color:"primary","no-caps":"",rounded:"",to:"/gallery",class:"action-button",id:"frontpage-button-to-gallery",style:(0,n.j5)(e.uiSettingsStore.uiSettings.gallery_button_style)},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{left:"",name:"photo_library"}),(0,i._)("div",S,(0,n.zw)(e.$t("BTN_LABEL_MAINPAGE_TO_GALLERY")),1)])),_:1},8,["style"])):(0,i.kq)("",!0),e.uiSettingsStore.uiSettings.show_admin_on_frontpage?((0,i.wg)(),(0,i.j4)(E,{key:1,rounded:"",color:"secondary","no-caps":"",to:"/admin",class:"action-button",id:"frontpage-button-to-admin"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{left:"",name:"admin_panel_settings"}),(0,i._)("div",f,(0,n.zw)(e.$t("BTN_LABEL_MAINPAGE_TO_ADMIN")),1)])),_:1})):(0,i.kq)("",!0)])])):(0,i.kq)("",!0)])),_:1}),e.showRecording?((0,i.wg)(),(0,i.j4)(I,{key:4,position:"top",offset:[0,25],align:"center",id:"frontpage-indicator-recording"},{default:(0,i.w5)((()=>[(0,i.Wm)(P,{color:"red",size:"10em"}),k,(0,i.Wm)(E,{flat:"",color:"red",label:"Stop recording",onClick:t[2]||(t[2]=t=>e.stopRecordingVideo())})])),_:1})):(0,i.kq)("",!0),this.uiSettingsStore.uiSettings.TIMEOUT_TO_SLIDESHOW>0?((0,i.wg)(),(0,i.j4)(q,{key:5,route:"/slideshow/gallery",timeout_ms:1e3*this.uiSettingsStore.uiSettings.TIMEOUT_TO_SLIDESHOW,warning_message:e.$t("MSG_WARN_BEFORE_AUTO_SLIDESHOW")},null,8,["timeout_ms","warning_message"])):(0,i.kq)("",!0)])),_:1})}var T=o(91569),v=o(19302),A=o(67575),b=o(15639),C=o(96694),E=o(61957);const I={class:"flex flex-center",style:{width:"70vw",height:"70vh"},id:"countdown-timer-container"},P=["innerHTML"];function q(e,t,o,s,r,a){const u=(0,i.up)("q-circular-progress");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",I,[(0,i.wy)((0,i._)("div",{style:{position:"absolute","font-size":"150px"},innerHTML:e.messageText,id:"countdown-timer-message"},null,8,P),[[E.F8,e.showMessage]]),(0,i.wy)((0,i.Wm)(u,{"show-value":"",style:{width:"100%",height:"100%"},value:e.remainingSeconds,min:0,max:this.duration,reverse:"",size:"70vh",color:"primary",class:"text-secondary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(parseFloat(e.remainingSeconds.toFixed(0))),1)])),_:1},8,["value","max"]),[[E.F8,e.showCountdown]])],512)),[[E.F8,e.showBox]])}const D=(0,i.aZ)({name:"CountdownTimer",data(){return{intervalTimerId:null,remainingSeconds:0}},mounted(){this.startTimer()},beforeUnmount(){clearInterval(this.intervalTimerId)},computed:{showBox(){return this.remainingSeconds>0},showCountdown(){return+this.remainingSeconds>=this.messageDuration},showMessage(){return!this.showCountdown}},methods:{abortTimer(){clearInterval(this.intervalTimerId),this.remainingSeconds=0},startTimer(){console.log(`starting timer, duration=${this.duration}`),this.remainingSeconds=this.duration,this.intervalTimerId=setInterval((()=>{this.remainingSeconds-=.05,this.remainingSeconds<=0&&clearInterval(this.intervalTimerId)}),50)}},props:{duration:{type:Number,required:!0},messageDuration:{type:Number,default:.5},messageText:{type:String,default:"ðŸ˜ƒ"}}});var L=o(11639),M=o(83302),N=o(69984),B=o.n(N);const O=(0,L.Z)(D,[["render",q]]),W=O;B()(D,"components",{QCircularProgress:M.Z});var x=o(1210);const z=(0,i.aZ)({components:{CountdownTimer:W,RouteAfterTimeout:x.Z},setup(){(0,v.Z)();const e=(0,A.h)(),t=(0,b.B)(),o=(0,C.R)();return{store:e,stateStore:t,uiSettingsStore:o,remoteProcedureCall:T.remoteProcedureCall}},methods:{takePicture(){(0,T.remoteProcedureCall)("/processing/chose/1pic")},takeCollage(e){(0,T.remoteProcedureCall)("/processing/chose/collage/"+e)},takeAnimation(e){(0,T.remoteProcedureCall)("/processing/chose/animation/"+e)},takeVideo(){(0,T.remoteProcedureCall)("/processing/chose/video")},stopRecordingVideo(){(0,T.remoteProcedureCall)("/processing/cmd/stop")}},watch:{},computed:{showProcessing:{get(){const e="captures_completed"==this.stateStore.state,t="capture"==this.stateStore.state;return e||t}},showRecording:{get(){return"record"==this.stateStore.state}},livestreamMirror:{get(){return this.uiSettingsStore.uiSettings.livestream_mirror_effect}},showCountdownCounting:{get(){const e="counting"==this.stateStore.state;return this.stateStore.duration>0&&e}},showPreview:{get(){const e=!0,t=!this.stateStore.state||"finished"==this.stateStore.state,o="record"==this.stateStore.state,i="counting"==this.stateStore.state;return e&&(t||i||o)}},showFrontpage:{get(){return!this.stateStore.state||"finished"==this.stateStore.state}}}});var j=o(69885),G=o(93040),Z=o(30627),H=o(68879),F=o(22857),R=o(5412);const $=(0,L.Z)(z,[["render",y]]),K=$;B()(z,"components",{QPage:j.Z,QSpinnerGrid:G.Z,QPageSticky:Z.Z,QBtn:H.Z,QIcon:F.Z,QSpinnerPuff:R.Z})}}]);