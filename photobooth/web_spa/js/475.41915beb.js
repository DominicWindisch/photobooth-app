"use strict";(globalThis["webpackChunkphotobooth_app_frontend"]=globalThis["webpackChunkphotobooth_app_frontend"]||[]).push([[475],{19475:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Q});var n=o(59835),i=o(86970);const s={key:1,class:"full-height full-width column justify-center content-center",style:{position:"absolute"}},r={key:2,class:"full-height full-width column justify-center content-center",style:{position:"absolute"}},a=["innerHTML"],l={key:0},u={class:"row q-gutter-md"},c=["innerHTML"],d=["innerHTML"],g=["innerHTML"],m=["innerHTML"],h={key:0},p={class:"q-gutter-md"},_=["innerHTML"],w=["innerHTML"],S=(0,n._)("br",null,null,-1);function f(e,t,o,f,k,T){const y=(0,n.up)("q-spinner-grid"),v=(0,n.up)("countdown-timer"),A=(0,n.up)("q-icon"),L=(0,n.up)("q-btn"),M=(0,n.up)("q-page-sticky"),C=(0,n.up)("q-spinner-puff"),b=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(b,{class:"q-pa-none column full-height"},{default:(0,n.w5)((()=>[e.showPreview?((0,n.wg)(),(0,n.iD)("div",{key:0,id:"preview-stream",style:{"background-image":'url("/aquisition/stream.mjpg")'},class:(0,i.C_)(["full-width column justify-center content-center",{mirroreffect:e.livestreamMirror}])},null,2)):(0,n.kq)("",!0),e.showProcessing?((0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(y,{size:"20em"})])):(0,n.kq)("",!0),e.showCountdownCounting?((0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(v,{ref:"countdowntimer",duration:this.stateStore.duration,messageDuration:e.uiSettingsStore.uiSettings.TAKEPIC_MSG_TIME,messageText:e.uiSettingsStore.uiSettings.TAKEPIC_MSG_TEXT},null,8,["duration","messageDuration","messageText"])])):(0,n.kq)("",!0),e.showFrontpage?((0,n.wg)(),(0,n.iD)("div",{key:3,id:"frontpage_text",innerHTML:e.uiSettingsStore.uiSettings["FRONTPAGE_TEXT"]},null,8,a)):(0,n.kq)("",!0),(0,n.Wm)(M,{position:"bottom",offset:[0,25]},{default:(0,n.w5)((()=>[e.showFrontpage?((0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("div",u,[e.uiSettingsStore.uiSettings.show_takepic_on_frontpage?((0,n.wg)(),(0,n.j4)(L,{key:0,stack:"",color:"primary","no-caps":"",rounded:"",onClick:t[0]||(t[0]=t=>e.takePicture()),class:"action-button col-auto"},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{name:"o_photo_camera"}),(0,n._)("div",{style:{"white-space":"nowrap"},class:"gt-sm",innerHTML:e.$t("BTN_LABEL_MAINPAGE_TAKE_PHOTO")},null,8,c)])),_:1})):(0,n.kq)("",!0),e.uiSettingsStore.uiSettings.show_takecollage_on_frontpage?((0,n.wg)(),(0,n.j4)(L,{key:1,stack:"",color:"primary","no-caps":"",rounded:"",onClick:t[1]||(t[1]=t=>e.takeCollage()),class:"action-button col-auto"},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{name:"o_auto_awesome_mosaic"}),(0,n._)("div",{style:{"white-space":"nowrap"},class:"gt-sm",innerHTML:e.$t("BTN_LABEL_MAINPAGE_TAKE_COLLAGE")},null,8,d)])),_:1})):(0,n.kq)("",!0),e.uiSettingsStore.uiSettings.show_takeanimation_on_frontpage?((0,n.wg)(),(0,n.j4)(L,{key:2,stack:"",color:"primary","no-caps":"",rounded:"",onClick:t[2]||(t[2]=t=>e.takeAnimation()),class:"action-button col-auto"},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{name:"o_gif_box"}),(0,n._)("div",{style:{"white-space":"nowrap"},class:"gt-sm",innerHTML:e.$t("BTN_LABEL_MAINPAGE_TAKE_ANIMATION")},null,8,g)])),_:1})):(0,n.kq)("",!0),e.uiSettingsStore.uiSettings.show_takevideo_on_frontpage?((0,n.wg)(),(0,n.j4)(L,{key:3,stack:"",color:"primary","no-caps":"",rounded:"",onClick:t[3]||(t[3]=t=>e.takeVideo()),class:"action-button col-auto"},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{name:"o_movie"}),(0,n._)("div",{style:{"white-space":"nowrap"},class:"gt-sm",innerHTML:e.$t("BTN_LABEL_MAINPAGE_TAKE_VIDEO")},null,8,m)])),_:1})):(0,n.kq)("",!0)])])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(M,{position:"top-left",offset:[25,25]},{default:(0,n.w5)((()=>[e.showFrontpage?((0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("div",p,[e.uiSettingsStore.uiSettings.show_gallery_on_frontpage?((0,n.wg)(),(0,n.j4)(L,{key:0,color:"primary","no-caps":"",rounded:"",to:"/gallery",class:"action-button",id:"frontage-gallery-button",style:(0,i.j5)(e.uiSettingsStore.uiSettings.gallery_button_style)},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{left:"",name:"photo_library"}),(0,n._)("div",{class:"gt-sm",innerHTML:e.$t("BTN_LABEL_MAINPAGE_TO_GALLERY")},null,8,_)])),_:1},8,["style"])):(0,n.kq)("",!0),e.uiSettingsStore.uiSettings.show_admin_on_frontpage?((0,n.wg)(),(0,n.j4)(L,{key:1,rounded:"",color:"secondary","no-caps":"",to:"/admin",class:"action-button"},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{left:"",name:"admin_panel_settings"}),(0,n._)("div",{class:"gt-sm",innerHTML:e.$t("BTN_LABEL_MAINPAGE_TO_ADMIN")},null,8,w)])),_:1})):(0,n.kq)("",!0)])])):(0,n.kq)("",!0)])),_:1}),e.showRecording?((0,n.wg)(),(0,n.j4)(M,{key:4,position:"top",offset:[0,25],align:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{color:"red",size:"10em"}),S,(0,n.Wm)(L,{flat:"",color:"red",label:"Stop recording",onClick:t[4]||(t[4]=t=>e.stopRecordingVideo())})])),_:1})):(0,n.kq)("",!0)])),_:1})}var k=o(91569),T=o(19302),y=o(67575),v=o(15639),A=o(96694),L=o(61957);const M={class:"flex flex-center",style:{width:"70vw",height:"70vh"}},C=["innerHTML"];function b(e,t,o,s,r,a){const l=(0,n.up)("q-circular-progress");return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",M,[(0,n.wy)((0,n._)("div",{style:{position:"absolute","font-size":"150px"},innerHTML:e.messageText},null,8,C),[[L.F8,e.showMessage]]),(0,n.wy)((0,n.Wm)(l,{"show-value":"",style:{width:"100%",height:"100%"},value:e.remainingSeconds,min:0,max:this.duration,reverse:"",size:"70vh",color:"primary",class:"text-secondary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(parseFloat(e.remainingSeconds.toFixed(0))),1)])),_:1},8,["value","max"]),[[L.F8,e.showCountdown]])],512)),[[L.F8,e.showBox]])}const P=(0,n.aZ)({name:"CountdownTimer",data(){return{intervalTimerId:null,remainingSeconds:0}},mounted(){this.startTimer()},beforeUnmount(){clearInterval(this.intervalTimerId)},computed:{showBox(){return this.remainingSeconds>0},showCountdown(){return+this.remainingSeconds>=this.messageDuration},showMessage(){return!this.showCountdown}},methods:{abortTimer(){clearInterval(this.intervalTimerId),this.remainingSeconds=0},startTimer(){console.log(`starting timer, duration=${this.duration}`),this.remainingSeconds=this.duration,this.intervalTimerId=setInterval((()=>{this.remainingSeconds-=.05,this.remainingSeconds<=0&&clearInterval(this.intervalTimerId)}),50)}},props:{duration:{type:Number,required:!0},messageDuration:{type:Number,default:.5},messageText:{type:String,default:"ðŸ˜ƒ"}}});var q=o(11639),E=o(83302),I=o(69984),N=o.n(I);const H=(0,q.Z)(P,[["render",b]]),B=H;N()(P,"components",{QCircularProgress:E.Z});const x=(0,n.aZ)({components:{CountdownTimer:B},setup(){(0,T.Z)();const e=(0,y.h)(),t=(0,v.B)(),o=(0,A.R)();return{store:e,stateStore:t,uiSettingsStore:o,remoteProcedureCall:k.remoteProcedureCall}},methods:{takePicture(){(0,k.remoteProcedureCall)("/processing/chose/1pic")},takeCollage(){(0,k.remoteProcedureCall)("/processing/chose/collage")},takeAnimation(){(0,k.remoteProcedureCall)("/processing/chose/animation")},takeVideo(){(0,k.remoteProcedureCall)("/processing/chose/video")},stopRecordingVideo(){(0,k.remoteProcedureCall)("/processing/cmd/stop")}},watch:{},computed:{showProcessing:{get(){const e="captures_completed"==this.stateStore.state,t="capture"==this.stateStore.state;return e||t}},showRecording:{get(){return"record"==this.stateStore.state}},livestreamMirror:{get(){return this.uiSettingsStore.uiSettings.livestream_mirror_effect}},showCountdownCounting:{get(){const e="counting"==this.stateStore.state;return this.stateStore.duration>0&&e}},showPreview:{get(){const e=!0,t=!this.stateStore.state||"finished"==this.stateStore.state,o="record"==this.stateStore.state,n="counting"==this.stateStore.state;return e&&(t||n||o)}},showFrontpage:{get(){return!this.stateStore.state||"finished"==this.stateStore.state}}}});var j=o(69885),D=o(93040),W=o(30627),G=o(68879),Z=o(22857),F=o(5412);const O=(0,q.Z)(x,[["render",f]]),Q=O;N()(x,"components",{QPage:j.Z,QSpinnerGrid:D.Z,QPageSticky:W.Z,QBtn:G.Z,QIcon:Z.Z,QSpinnerPuff:F.Z})}}]);