"use strict";(globalThis["webpackChunkphotobooth_app_frontend"]=globalThis["webpackChunkphotobooth_app_frontend"]||[]).push([[463],{20463:(e,t,i)=>{i.r(t),i.d(t,{default:()=>D});var o=i(59835),l=i(86970);const s={key:0,class:"row justify-center q-gutter-sm",id:"print-gallery-container"},n={key:0},r={key:0,class:"absolute-full text-subtitle2 flex flex-center"},a=["innerHTML"],c={class:"q-ml-sm"},m={class:"q-gutter-sm"};function d(e,t,i,d,u,p){const g=(0,o.up)("q-icon"),h=(0,o.up)("q-img"),f=(0,o.up)("q-card"),S=(0,o.up)("q-intersection"),_=(0,o.up)("q-avatar"),w=(0,o.up)("q-card-section"),y=(0,o.up)("q-btn"),I=(0,o.up)("q-card-actions"),q=(0,o.up)("q-dialog"),v=(0,o.up)("q-page-sticky"),P=(0,o.up)("q-page"),k=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(P,{padding:""},{default:(0,o.w5)((()=>[p.isGalleryEmpty?((0,o.wg)(),(0,o.iD)("div",{key:1,innerHTML:d.uiSettingsStore.uiSettings.GALLERY_EMPTY_MSG},null,8,a)):((0,o.wg)(),(0,o.iD)("div",s,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.mediacollectionStore.collection,((e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:e.id},["image"==e.media_type||"collage"==e.media_type?((0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(S,{once:"",class:"preview-item",id:`preview-item-${t}`},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"q-ma-sm",onClick:e=>p.toggleSelectPic(t)},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{src:p.getImageDetail(t),loading:"eager","no-transition":"","no-spinner":"",ratio:1,class:"rounded-borders",fit:"contain"},{default:(0,o.w5)((()=>[this.itemsSelected.has(t)?((0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(g,{size:"150px",name:"o_check",class:"text-primary"})])):(0,o.kq)("",!0)])),_:2},1032,["src"])])),_:2},1032,["onClick"])])),_:2},1032,["id"])])):(0,o.kq)("",!0)],64)))),128))])),(0,o.Wm)(q,{modelValue:d.confirmPrintMult,"onUpdate:modelValue":t[1]||(t[1]=e=>d.confirmPrintMult=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"q-pa-sm",style:{"min-width":"350px"},id:"gallery-confirm-print-dialog"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{icon:"delete",color:"primary","text-color":"white"}),(0,o._)("span",c,(0,l.zw)(e.$t("MSG_CONFIRM_PRINT_IMAGE",{count:d.numItemsSelected})),1)])),_:1}),(0,o.Wm)(I,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(y,{flat:"",label:e.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[k]]),(0,o.wy)((0,o.Wm)(y,{label:e.$t("BTN_LABEL_PRINT_IMAGE"),color:"primary",to:"/",onClick:t[0]||(t[0]=t=>{p.confirmPrint(),e.$emit("closeEvent")})},null,8,["label"]),[[k]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),d.numItemsSelected>0?((0,o.wg)(),(0,o.j4)(v,{key:2,position:"bottom-right",offset:[25,25]},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)(y,{color:"primary",rounded:"","no-caps":"",onClick:t[2]||(t[2]=e=>d.confirmPrintMult=!0),class:"action-button",id:"gallery-confirm-print"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{left:"",name:"print"}),(0,o._)("div",null,(0,l.zw)(e.$t("BTN_LABEL_CONFIRM_PRINT",{count:d.numItemsSelected})),1)])),_:1})])])),_:1})):(0,o.kq)("",!0)])),_:1})}i(72879);var u=i(67575),p=i(96694),g=i(33630),h=i(60499),f=i(43701);const S={components:{},setup(){const e=(0,u.h)(),t=(0,p.R)(),i=(0,g.r)(),o=new Set,{getScrollTarget:l,setVerticalScrollPosition:s}=f["default"];return{store:e,uiSettingsStore:t,mediacollectionStore:i,itemsSelected:o,getScrollTarget:l,setVerticalScrollPosition:s,numItemsSelected:(0,h.iH)(0),confirmPrintMult:(0,h.iH)(!1)}},computed:{itemId(){return console.log("ID is ",this.$route.params),this.itemsSelected.add(parseInt(this.$route.params.selectedItemId)),this.$route.params.selectedItemId},isGalleryEmpty(){return 0==this.mediacollectionStore.collection_number_of_items},numSelected(){return this.itemsSelected.size}},mounted(){let e=parseInt(this.$route.params.selectedItemId);if(void 0!=e){this.toggleSelectPic(e);let t=document.getElementById(`preview-item-${e}`);if(t){console.log("Scroll to: ",t);const e=this.getScrollTarget(t),i=t.offsetTop,o=1e3;this.setVerticalScrollPosition(e,i,o)}}},methods:{getImageDetail(e,t="thumbnail"){return this.mediacollectionStore.collection[e][t]},toggleSelectPic(e){e=parseInt(e),this.itemsSelected.has(e)?this.itemsSelected.delete(e):this.itemsSelected.add(e),this.numItemsSelected=this.itemsSelected.size},confirmPrint(){let e=[];for(let i of this.itemsSelected)e.push(this.mediacollectionStore.collection[i].id);let t=e.join(",");console.log("Printing elements: ",t),this.$api.get(`/print/item/${t}`).then((e=>{console.log(e),this.$q.notify({message:"Started printing...",type:"positive",spinner:!0})})).catch((e=>{e.response?(console.log(e.response),425==e.response.status?this.$q.notify({message:e.response.data["detail"],caption:"Print Service",type:"info"}):this.$q.notify({message:e.response.data["detail"],caption:"Print Service",type:"negative"})):e.request?console.error(e.request):console.error("Error",e.message)}))}}};var _=i(11639),w=i(16602),y=i(51663),I=i(69885),q=i(21517),v=i(44458),P=i(70335),k=i(22857),b=i(32074),T=i(63190),$=i(61357),Z=i(11821),C=i(68879),Q=i(30627),E=i(62146),M=i(69984),W=i.n(M);const L=(0,_.Z)(S,[["render",d],["__scopeId","data-v-2fc31362"]]),D=L;W()(S,"components",{QHeader:w.Z,QToolbar:y.Z,QPage:I.Z,QIntersection:q.Z,QCard:v.Z,QImg:P.Z,QIcon:k.Z,QDialog:b.Z,QCardSection:T.Z,QAvatar:$.Z,QCardActions:Z.Z,QBtn:C.Z,QPageSticky:Q.Z}),W()(S,"directives",{ClosePopup:E.Z})}}]);